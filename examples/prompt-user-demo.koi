// Demo: Prompt User Action
// Shows how agents can ask users for input during execution

package "prompt-user-demo"

role Worker { can execute }

Agent Assistant : Worker {
  llm default = { provider: "openai", model: "gpt-4o-mini" }

  on greet(args: Json) {
    playbook """
    EXACT SEQUENCE - Do each step once only:

    1. prompt_user with question "What is your name?" - save as ID "a1"
    2. print greeting: "Hello, ${a1.output.answer}! It's great to meet you!"
    3. prompt_user with question "Do you want to continue?" and options ["Yes", "No"] - save as ID "a2"
    4. if action with condition "${a2.output.answer} === 'Yes'":
       - then: [
           prompt_user with question "What is your age?" - save as ID "a3",
           print "You are ${a3.output.answer} years old. That's a great age!"
         ]
       - else: [
           print "Goodbye! Maybe next time."
         ]

    DO NOT repeat questions. Each prompt_user should happen exactly once.
    """
  }
}

run Assistant.greet({})
