// Demo: Iteration Actions (repeat and while)
// Shows how to repeat actions fixed number of times or until condition

package "iteration-demo"

role Worker { can execute }

Agent Assistant : Worker {
  llm default = { provider: "openai", model: "gpt-4o-mini" }

  on test_repeat(args: Json) {
    playbook """
    Pregunta al usuario 3 veces por su nombre.
    Al final, muestra todas las respuestas.
    """
  }

  on test_while(args: Json) {
    playbook """
    Habla con el usuario hasta que te diga "hasta luego".
    En cada iteración, pregunta qué quiere hablar y responde algo relacionado.
    Cuando diga "hasta luego", despídete cordialmente.
    """
  }
}

// To test:
// koi run examples/iteration-demo.koi
// Then uncomment one of the following:

run Assistant.test_repeat({})
// run Assistant.test_while({})
