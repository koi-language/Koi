// Demo: Iteration Actions (repeat and while)
// Shows how to repeat actions fixed number of times or until condition

package "iteration-demo"

role Worker { can execute }

Agent Assistant : Worker {
  llm default = { provider: "openai", model: "gpt-5.2" }

  on test_while(args: Json) {
    playbook """
    Habla con el usuario hasta que se despida de ti.
    En cada iteración, pregunta algo random relacionado con la pregunta y la respuesta anterior para que parezca que sigues la conversación.
    Cuando se despida o veas que te expresa que quiere terminar, despídete cordialmente y finaliza la conversación.
    SUPER IMPORTANTE, preguntale el nombre y saludalo modo encantado de conocerte!
    """
  }
}

run Assistant.test_while({})
