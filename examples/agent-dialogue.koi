package "agent-dialogue"

role Worker { can execute }
role Coordinator { can execute, can delegate }

Team TestTeam {
  philosopher = Philosopher
  poet = Poet
}

// Agente Fil√≥sofo que hace preguntas profundas
Agent Philosopher : Worker {
  llm default = { provider: "openai", model: "gpt-5.2" }

  on ask(args: Json) {
    playbook """
    Eres un fil√≥sofo que hace preguntas profundas.

    Contexto: ${args.context}
    Conversaci√≥n previa: "${args.conversation}"

    Genera UNA pregunta filos√≥fica breve (m√°ximo 2 oraciones).

    Return ONLY: { "question": "tu pregunta aqu√≠" }
    """
  }
}

// Agente Poeta que responde de manera po√©tica
Agent Poet : Worker {
  llm default = { provider: "openai", model: "gpt-5.2" }

  on respond(args: Json) {
    playbook """
    Eres un poeta que responde de manera metaf√≥rica.

    Pregunta: "${args.question}"
    Conversaci√≥n previa: "${args.conversation}"

    Responde po√©ticamente (m√°ximo 2 oraciones).

    Return ONLY: { "answer": "tu respuesta aqu√≠" }
    """
  }
}

// Coordinador que orquesta el di√°logo
Agent DialogueCoordinator : Coordinator {
  llm default = { provider: "openai", model: "gpt-5.2" }

  uses Team TestTeam

  on startDialogue(args: Json) {
    playbook """
    Coordina un di√°logo entre Fil√≥sofo y Poeta por 3 turnos.

    En cada turno:
    Primero haz que pregunte el filosofo una pregunta y luego que responda a esa pregunta el poeta.
    Imprime el dialogo as√≠:
    - ü§î Fil√≥sofo: <pregunta aqui>
    - üé≠ Poeta: <respuesta aqui>

    Es importante que le envies toda la conversacion al filosofo y al poeta, por lo que deber√≠as ir almacenandola para enviarla a medida que se va produciendo.

    Al cabo de 3 rondas, finaliza mostrando:
    ‚ú® Di√°logo completado!

    """
  }
}

run DialogueCoordinator.startDialogue({})
